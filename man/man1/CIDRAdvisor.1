.\"// 
.\"// Copyright (c) 2001,2002                        RIPE NCC
.\"//
.\"// All Rights Reserved
.\"//
.\"// Permission to use, copy, modify, and distribute this software and its
.\"// documentation for any purpose and without fee is hereby granted,
.\"// provided that the above copyright notice appear in all copies and that
.\"// both that copyright notice and this permission notice appear in
.\"// supporting documentation, and that the name of the author not be
.\"// used in advertising or publicity pertaining to distribution of the
.\"// software without specific, written prior permission.
.\"//
.\"// THE AUTHOR DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE, INCLUDING
.\"// ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS; IN NO EVENT SHALL
.\"// AUTHOR BE LIABLE FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY
.\"// DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN
.\"// AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\"// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"//
.\"//  Copyright (c) 1996 by the University of Southern California
.\"//  and/or the International Business Machines Corporation.
.\"//  All rights reserved.
.\"//
.\"//  Permission to use, copy, modify, and distribute this software and
.\"//  its documentation in source and binary forms for lawful
.\"//  non-commercial purposes and without fee is hereby granted, provided
.\"//  that the above copyright notice appear in all copies and that both
.\"//  the copyright notice and this permission notice appear in supporting
.\"//  documentation, and that any documentation, advertising materials,
.\"//  and other materials related to such distribution and use acknowledge
.\"//  that the software was developed by the University of Southern
.\"//  California, Information Sciences Institute and/or the International
.\"//  Business Machines Corporation.  The name of the USC or IBM may not
.\"//  be used to endorse or promote products derived from this software
.\"//  without specific prior written permission.
.\"//
.\"//  NEITHER THE UNIVERSITY OF SOUTHERN CALIFORNIA NOR INTERNATIONAL
.\"//  BUSINESS MACHINES CORPORATION MAKES ANY REPRESENTATIONS ABOUT
.\"//  THE SUITABILITY OF THIS SOFTWARE FOR ANY PURPOSE.  THIS SOFTWARE IS
.\"//  PROVIDED "AS IS" AND WITHOUT ANY EXPRESS OR IMPLIED WARRANTIES,
.\"//  INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
.\"//  MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE, TITLE, AND 
.\"//  NON-INFRINGEMENT.
.\"//
.\"//  IN NO EVENT SHALL USC, IBM, OR ANY OTHER CONTRIBUTOR BE LIABLE FOR ANY
.\"//  SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES, WHETHER IN CONTRACT,
.\"//  TORT, OR OTHER FORM OF ACTION, ARISING OUT OF OR IN CONNECTION WITH,
.\"//  THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"//
.\"//  Questions concerning this software should be directed to 
.\"//  info-ra@isi.edu.
.\"//
.\"//  Author(s): Satish Kumar        <kkumar@isi.edu>
.\"
.\"
.TH CIDRAdvisor 1 local
.SH NAME
CIDRAdvisor \- suggests safe cidr aggregates (i.e. those that do not violate
any policy constraints) that an AS can advertise to each of its
neighbour ASes. 

.SH SYNOPSIS
.B CIDRAdvisor
.RI [ flags ]\ [<as-no>]
.SH DESCRIPTION
.PP
CIDRAdvisor examines the address prefixes of <as-no> and the polices
registered in the IRR and identifies aggregates that do not violate any
policy constraints.  If <as-no> is not specified it is deduced for your
system from the IP address of your host and IRR. The amount of policy and
topology considered by the tool in forming the aggregates is configurable
as described below.

The tool computes aggregates that can be safely advertised by an AS to
each of its neighbours. An AS encountered during the computation of
the aggregates for a particular neighbour AS, X is said to be at
distance k if it is k AS hops away from X (considering the shortest
path from that AS to X that does not go through the aggregator). Note
that X is at distance 0 from itself by the above definition.
The tool can be made to examine policies of only those ASes within
distance k from the neighbour X (in addition to examining the
aggregator's policies) by setting a parameter called radius to k.  

The definition of radius has been extended to contain -1 and -2. 
For radius -1, only the aggregator's policies are examined while for
radius -2 policies are not examined in forming the aggregates.
A radius of infinity is denoted as -3 in which case the policies of
all the ASes in the Internet are examined.

If the address prefixes of the aggregator AS that can be aggregated are
multihomed then for each such address prefix the program asks the user if it
should be included in the aggregate. 
If it can be included the user must type 'y' in response to that question 
otherwise it is not considered for aggregation.
An option is provided to include all such multihomed address prefixes
in the aggregates.
In the case of proxy aggregation it ensures that the address prefixes being
proxy aggregated are reachable only through paths via the proxy aggregator.
This is so that there are no policy violations by the formed aggregates due to
longest match routing.

The program outputs the best possible aggregation that can be done
with the given address prefixes. 
In addition it prints for each neighbour the aggregates that can be
advertised to it without violating the policy constraints of ASes
within the specified radius .

.SH IRRToolSet COMMON OPTIONS
.RS
.IP -help
Print summary of command-line options and abort.
.IP "\-T [whois_query | whois_response | input | all]"
Trace the argument. Useful for debugging.
.IP "\-D <integer>"
Print debugging messages of debug channel <integer> 
(if compiled with DEBUG defined).
.IP "\-version"
Print the version number and quit.
.IP "\-h <host-name>"
Establish a whois connection to host <host-name>.
The default is whois.radb.net.
.IP "\-p <port-no>"
Establish a whois connection to port <port-no>.
The default is 43.
.IP "\-protocol <protocol>"
Use the <protocol> to connect to the IRR server. <protocol> can be irrd(rawhoisd), ripe(bird), and ripe_perl. The default is irrd. The ripe_perl option should be used with the old ripe server.
.IP "\-s <source-list>"
Consider the sources specified in the comma separated <source-list>.
If an object is defined in multiple sources in <source-list>,
CIDRAdvisor uses the definition first encountered in <source-list>
from left to right.
.IP \-rusage
Print resource usage upon completion.
.IP "\-ignore_errors"
Do not print error and warning messages due to communication to the
database server or parsing policy objects.
.IP "\-report_errors"
Print error and warning messages due to communication to the
database server or parsing policy objects.
.RE
.SH OTHER OPTIONS
.RS
.IP "\-as <as-no>"
Specifies the AS which is performing the aggregation.
.IP "\-proxy <proxy-list>"
Specifies a comma separated list of ASes whose addr prefixes are to be
proxy aggregated.
.IP "\-radius <radius>"
Configures the amount of policy and topology considered. See description.
.IP "\-incl_multihomed"
Consider all multihomed address prefixes of the aggregator AS for aggregation.
.RE
.SH ENVIRONMENT VARIABLES
.RS
.IP IRR_HOST
Specifies the IRR host to connect.
.IP IRR_PORT
Specifies the IRR port number to connect.
.IP IRR_SOURCES
Specifies the source list (comma separated) to consider.
.RE
.PP
Command line options take precedence over environment variables.
.SH EXAMPLES
.PP
.nf
	% CIDRAdvisor -as AS226 -radius -1
	196.2.40.0/24
	Origins:	
	AS174 AS1220 AS226 
	Can the address be aggregated?y

	196.2.41.0/24
	Origins:
	AS174 AS1220 AS226 
	Can the address be aggregated?y

	Best possible aggregation:
	196.2.40.0/23 
	Components:
	196.2.40.0/24 ( AS226 )
	196.2.41.0/24 ( AS226 )

	198.178.204.0/23 
	Components:
	198.178.204.0/24 ( AS226 )
	198.178.205.0/24 ( AS226 )

	199.249.180.0/23 
	Components:
	199.249.180.0/24 ( AS226 )
	199.249.181.0/24 ( AS226 )


	AS226->AS2150
	196.2.40.0/23 198.178.204.0/23 199.249.180.0/23 



        % CIDRAdvisor -as AS5400 -proxy AS1922,AS2605,AS1902 -radius -3
	Best possible aggregation:
	192.108.132.0/22
	Components:
	192.108.132.0/22 ( AS1922 )
	192.108.134.0/24 ( AS2605 )
	192.108.135.0/24 ( AS1902 )
	
	  . . .

	AS5400->AS2611
	192.108.134.0/23 . . .

.fi
.PP
.SH ERROR AND WARNING MESSAGES
Unknown protocol!
.RS
.PP
Connection to IRR host failed. This can be caused by various reasons, see Errors manpage, IRR Communication errors.
.PP
.RE
No autnum for AS <source_as>
.PP
Warning: No autnum record found for AS
.RS
.PP
Aut-num object for <source_as> cannot be found on specified IRR for specified source(s). You might mistype the source, host or AS-number, or the object is non-existent.
.PP
.RE
For more error descriptions, please see 
.B
Errors 
manual page.
.SH AUTHORS
Satish Kumar        <kkumar@isi.edu>

